{% extends 'base.html' %} {% block content %}
<main class="single-package">
    <div class="container">
        {% set name = pkg["app_name"] %}
        {% if not name %} 
        {% set name = pkg["name"] %} 
        {% endif %} 
        {% set icon = pkg["icon"] %} 
        {% if not icon %} 
        {% set icon = "/static/images/package.svg" %} 
        {% endif %} 
        {% set screenshots = pkg["screenshots"].split(" ") %}
        {% set licenses = pkg["license"].split(" ") %} 
        {% set pkg_name = pkg["name"] %} 
        {% set version = pkg["version"] %}
        {% if pkg["long_description"] %}
        {% set description = pkg["long_description"] %}
        {% else %}
        {% set description = pkg["description"] %}
        {% endif %}
        <div class="center">
            <h1 class="white-text"><img src="{{ icon }}" class="single-icon" alt="package image">{{ name }}</h1>
        </div>
        <div class="row">
            <div class="col s12">
                <div class="carousel carousel-slider center">
                    {% for img in screenshots %}
                    <a class="carousel-item"><img onerror="this.src='/static/images/no-screenshot.png'" src="{{ img }}"></a>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col s12 l8">
                <p class="grey lighten-5">
                    Description<br><br>{{ description }}
                </p>
            </div>
            <div class="col s12 l4">            
                <p class="grey lighten-5">
                    {% if pkg["pkg_format"] == "pamac" %}
                    <span class="center" style="display: block;margin-bottom: 15px;">
                        <button data-target="details" class="pkg-details-btn waves-effect waves-light btn-small modal-trigger">
                            Details
                        </button>
                    </span>
                    {% endif %}
                    <span class="small">
                        Licenses: <span class="text-info">
                            {% for license in licenses %} 
                              {% if "http" in license %}
                                <a target="_blank" href='{{ license.split("=")[1] }}'>{{ license.split("=")[1] }}</a>
                              {% else %}
                                {{ license.replace("LicenseRef-", "").replace("-only", "") }} 
                              {% endif %}
                            {% endfor %} </span>
                        <br> Version: <span class="text-info">{{ version }}</span>
                        <br> {% if pkg["download_size"] !=0 %}
                        Download Size: <span class="text-info">{{ pkg["download_size"] }}</span>
                        <br> {% endif %} 
                        {% if pkg["url"] and "mailto" not in pkg["url"] %}
                        <a target="_blank" href="{{ pkg['url'] }}">{{ pkg["url"] }}</a>
                        <br><br>
                        {% endif %} 
                        {{ link | safe }}
                    </span>
                    <span class="small">
                        Installing:
                        <br>
                        <code>{{ pkg["pkg_format"] }} install {{ pkg_name }}</code>
                        <br><br> Removing:
                        <br>
                        <code>{{ pkg["pkg_format"] }} remove {{ pkg_name }}</code>
                    </span>
                </p>
                {% if pkg["pkg_format"] == "pamac" %}
                {% include 'includes/package-details.html' %}
                {% endif %}
            </div>
        </div>
    </div>
    {% include 'includes/dock.html' %}
    {% include 'includes/navigation.html' %}
</main>
{% endblock %}